<!-- Breadcumb and buttons -->
<div class="block-breadcrumb-status-button">

    <div class="block-breadcrumb-status-button_breadcrumb">
        <kendo-breadcrumb [collapseMode]="collapseMode" [items]="itemsBreadCrumb" SetClassSVGIcon HamperBreadcrumb />
    </div>

    <div class="block-breadcrumb-status-button_status">
        <component-checkboxlist (listChecked)="getListCheckBoxChecked($event, 'status')"
            [listCheckBoxDefault]="listCheckBoxStatusDefault" [listCheckBox]="listCheckBoxStatus" #checkboxlistStatus/>
    </div>

    <div class="block-breadcrumb-status-button_button-group">
        <component-button classIcon="k-i-export" />
        <component-button type="default" classIcon="k-i-import" nameButton="Template" />
        <component-button type="success" classIcon="k-i-plus" nameButton="Thêm mới" />
    </div>

</div>


<!-- Filter -->
<div class="block-filter-evaluation">

    <app-search-filter-group (resetValue)="resetFilter()"
        (getValue)="handleSearch($event)"></app-search-filter-group>

    <div class="filter-date">

        <div class="label">Lọc theo thời gian mở đợt kiểm tra</div>

        <div class="date">

            <app-datepicker [minDate]="minDate" [maxDate]="dateEndPicked" (datePicked)="getDate($event, 'Start')" #datepickerStart/>

            <div class="line"> - </div>

            <app-datepicker [minDate]="dateStartPicked" [maxDate]="maxDate" (datePicked)="getDate($event, 'End')" #datepickerEnd/>

            <component-checkboxlist (listChecked)="getListCheckBoxChecked($event, 'stage')"
                [listCheckBox]="listCheckBoxStage" #checkboxlistStage/>

        </div>
    </div>

</div>


<div class="block-list-evaluation">
    <kendo-grid 
        SetClassSVGIcon 
        [data]="originData" 
        [skip]="state.skip"
        [pageSize]="state.take"
        (pageChange)="onPageChange($event)"
        [pageable]="{
            type: 'numeric',
            info: true,
            pageSizes: true,
        }" 
        [pageSize]="pageSizes[0]" 
        [loading]="isLoading"  
        [selectable]="{ checkboxOnly: true }">
        <kendo-grid-checkbox-column [showSelectAll]="true" [width]="60"></kendo-grid-checkbox-column>

        <kendo-grid-column [resizable]="true" [width]="640" class="col-1" title="Đợt đánh giá">
            <ng-template kendoGridCellTemplate let-dataItem>

                <div class="field-code-name">
                    <div class="field-code-name_code">
                        {{ dataItem.SessionID }}
                    </div>
                    <div class="field-code-name_line"></div>
                    <div class="field-code-name_name">
                        {{ dataItem.SessionName }}
                    </div>
                </div>

                <div class="field-category">
                    <div class="field-category_title">
                        Phân loại
                    </div>
                    <div class="field-category_line"></div>
                    <div class="field-category_category">
                        {{ dataItem.TypeOfSessionName }}
                    </div>
                </div>

            </ng-template>
        </kendo-grid-column>

        <kendo-grid-column [resizable]="true" [width]="220" class="col-2" title="Thời gian bắt đầu">
            <ng-template kendoGridCellTemplate let-dataItem>
                <div class="date-start">
                    {{ displayDate(dataItem.StartDate) }}
                </div>
                <div class="date-end">
                    {{ displayDate(dataItem.EndDate) }}
                </div>
            </ng-template>
        </kendo-grid-column>

        <kendo-grid-column [resizable]="true" [width]="300" class="col-3" field="NoOfEmployee"
            title="SL nhân sự tham gia" />

        <kendo-grid-column [resizable]="true" [width]="345" class="col-4" title="Tình trạng">
            <ng-template kendoGridCellTemplate let-dataItem>
                <div class="status" [style.color]="dataItem.StatusName | statusColor">
                    {{ dataItem.StatusName }}
                </div>
                <div class="stage">
                    {{ dataItem.SessionStatusName }}
                </div>
            </ng-template>
        </kendo-grid-column>

        <kendo-grid-column [sticky]="true" [resizable]="true" [width]="58" class="col-5">
            <ng-template kendoGridCellTemplate let-dataItem>
                <div class="tool-box" [id]="dataItem.Code"
                    (click)="toggleToolBox(dataItem.Code, $event)">
                    <span class="k-icon k-font-icon k-i-more-horizontal"></span>
                    <div class="action-list-box" *ngIf="toolBoxSeleted === dataItem.Code">
                        <div class="action" *ngFor="let action of getListActions(dataItem.StatusName, dataItem.SessionStatusName)">
                            {{action}}
                        </div>
                    </div>
                </div>
            </ng-template>
        </kendo-grid-column>
        
        <ng-template kendoPagerTemplate>
            <div class="pagination">
                <div class="page-size">
                    <kendo-pager-page-sizes class="k-pager-sizes" [pageSizes]="pageSizes">
                        <kendo-label>
                            <label>Hiển thị mỗi trang</label>
                        </kendo-label>
                    </kendo-pager-page-sizes>
                </div>
                <div class="aria-pagin">
                    <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                    <kendo-pager-numeric-buttons [buttonCount]="4"></kendo-pager-numeric-buttons>
                    <kendo-pager-next-buttons></kendo-pager-next-buttons>
                </div>
            </div>
        </ng-template>
    </kendo-grid>
</div>